/*! rwd - Author: Joaquin Marti - 2012  Dual MIT/BSD license */
/*! Javascript helper for responsive design */
(function(g,h){"use strict";var j=g.document;var k=[];var l;var m=[];var p=[];var q={get:function(){var a=j.getElementsByTagName('link');for(var i=0,length=a.length;i<length;i++){if(a[i].getAttribute('data-name')){k.push({'name':a[i].getAttribute('data-name'),'media':a[i].getAttribute('media')})}}},setActive:function(){for(var i=0,length=k.length;i<length;i++){if(g.matchMedia(k[i].media).matches){if(l!==k[i].name){l=k[i].name;r.breakpointChange()}}}},getMedia:function(a){for(var i=0,length=k.length;i<length;i++){if(a===k[i].name){return k[i].media}}}};var r={bind:function(){g.addEventListener('resize',function(){q.setActive();s.refresh()})},breakpointChange:function(){t.execute()}};var s={process:function(a){var b,src,pr,oSrc;b=s.getActiveSource(a.element);oSrc=s.getCurrentSrc(b);src=oSrc.src;pr=oSrc.pr;if(s.testUpdateSrc(a.element,src)){if(u.isFunction(a.callback.before)){a.callback.before.call()}s.render(a,src,pr);if(u.isFunction(a.callback.after)){a.callback.after.call()}}},render:function(b,c,d){var e=b.element;var f=e.getElementsByTagName('img')[0];if(!f){f=j.createElement('img');f.alt=e.getAttribute('alt');e.appendChild(f)}f.onload=function(){var a=new Image();a.src=c;f.width=a.width/d;f.height=a.height/d;if(!b.executed){if(u.isFunction(b.callback.loadonce)){b.callback.loadonce.call()}b.executed=true}if(u.isFunction(b.callback.load)){b.callback.load.call()}};f.src=c},refresh:function(){for(var i=0,length=m.length;i<length;i++){s.process(m[i])}},testUpdateSrc:function(a,b){var c=a.getElementsByTagName('img')[0];var d=(c)?c.getAttribute('src'):'';if(b!==d){return true}return false},getActiveSource:function(a){var b=s.getSources(a);var c;for(var i=0,length=b.length;i<length;i++){c=b[i].getAttribute('media')||q.getMedia(b[i].getAttribute('data-media'));if(c&&g.matchMedia&&g.matchMedia(c).matches){return b[i]}}},getSources:function(a){return a.getElementsByTagName('source')},getCurrentSrc:function(a){var b=a.getAttribute('srcset');if(b){var c=g.devicePixelRatio||1;var d=b.split(',');for(var i=d.length-1;i>=0;i--){var e=v.trim(d[i]).split(' ');var f=parseFloat(e[1],10);if(c>=f){return{src:e[0],pr:c}}}}else{return{src:a.getAttribute('src'),pr:1}}}};var t={execute:function(){for(var a in p){if(p.hasOwnProperty(a)){t.executeOne(a)}}},executeOne:function(a){var b=q.getMedia(a);if(g.matchMedia(b).matches){for(var i=0,length=p[a].match.length;i<length;i++){p[a].match[i].call()}}else{for(var n=0,nlength=p[a].unmatch.length;n<nlength;n++){p[a].unmatch[n].call()}}}};var u={nativePicture:function(){if(!!(j.createElement('picture')&&j.createElement('source')&&g.HTMLPictureElement)){return true}return false},isPictureElement:function(o){return(typeof HTMLElement==='object'?o instanceof HTMLElement&&o.tagName==='PICTURE':o&&typeof o==='object'&&o.nodeType===1&&typeof o.nodeName==='string'&&o.tagName==='PICTURE')},isFunction:function(o){if(typeof(o)==="function"){return true}else{return false}}};var v={merge:function(a,b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}return a},trim:function(a){return a.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}};var w=(function(){var d={init:function(){q.get();q.setActive();r.bind()},getBreakpoint:function(){return l},nativePicture:u.NativePicture,picture:function(a,b){var c;if(u.nativePicture()){return}for(var i=0,length=a.length;i<length;i++){if(u.isPictureElement(a[i])){c={'element':a[i],'callback':{'before':b.before,'after':b.after,'load':b.load,'loadonce':b.loadonce},'executed':false};m.push(c);s.process(m[m.length-1])}}},register:function(a,b){if(!p[a]){p[a]=[];p[a].match=[];p[a].unmatch=[]}if(b.match&&u.isFunction(b.match)){p[a].match.push(b.match)}if(b.unmatch&&u.isFunction(b.unmatch)){p[a].unmatch.push(b.unmatch)}t.executeOne(a)}};return d})();g.rwd=w})(window);rwd.init();