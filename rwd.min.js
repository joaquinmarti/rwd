/*! rwd - Author: Joaquin Marti - 2012  Dual MIT/BSD license */
/*! Javascript helper for responsive design */
(function(g,h){"use strict";var j=g.document;var k=[];var l;var m;var p=[];var q=[];var r={};var s={get:function(){var a=j.getElementsByTagName('link');for(var i=0,length=a.length;i<length;i++){if(a[i].getAttribute('data-name')){k.push({'name':a[i].getAttribute('data-name'),'media':a[i].getAttribute('media')})}}},push:function(a){for(var i=0,length=a.length;i<length;i++){k.push({'name':a[i].name,'media':a[i].media})}},setActive:function(){for(var i=0,length=k.length;i<length;i++){if(g.matchMedia(k[i].media).matches){if(l!==k[i].name){m=l;l=k[i].name;t.breakpointChange()}}}},getMedia:function(a){for(var i=0,length=k.length;i<length;i++){if(a===k[i].name){return k[i].media}}}};var t={bind:function(){g.addEventListener('resize',function(){s.setActive();u.refresh()})},breakpointChange:function(){v.execute()}};var u={process:function(a){var b,src,pr,oSrc;b=u.getActiveSource(a.element);if(!b)return false;oSrc=u.getCurrentSrc(b);src=oSrc.src;pr=oSrc.pr;if(u.testUpdateSrc(a.element,src)){if(x.isFunction(a.callback.before)){a.callback.before.call()}u.render(a,src,pr);if(x.isFunction(a.callback.after)){a.callback.after.call()}}},render:function(b,c,d){var e=b.element;var f=e.getElementsByTagName('img')[0];if(!f){f=j.createElement('img');f.alt=e.getAttribute('alt');e.appendChild(f)}f.onload=function(){var a=new Image();a.src=c;f.width=a.width/d;f.height=a.height/d;if(!b.executed){if(x.isFunction(b.callback.loadonce)){b.callback.loadonce.call()}b.executed=true}if(x.isFunction(b.callback.load)){b.callback.load.call()}};f.src=c},refresh:function(){for(var i=0,length=p.length;i<length;i++){u.process(p[i])}},testUpdateSrc:function(a,b){var c=a.getElementsByTagName('img')[0];var d=(c)?c.getAttribute('src'):'';if(b!==d){return true}return false},getActiveSource:function(a){var b=u.getSources(a);var c;for(var i=0,length=b.length;i<length;i++){c=b[i].getAttribute('media')||s.getMedia(b[i].getAttribute('data-media'));if(c&&g.matchMedia&&g.matchMedia(c).matches){return b[i]}}},getSources:function(a){return a.getElementsByTagName('source')},getCurrentSrc:function(a){var b=a.getAttribute('srcset');if(b){var c=g.devicePixelRatio||1;var d=b.split(',');for(var i=d.length-1;i>=0;i--){var e=y.trim(d[i]).split(' ');var f=parseFloat(e[1],10);if(c>=f){return{src:e[0],pr:c}}}}else{return{src:a.getAttribute('src'),pr:1}}}};var v={execute:function(){for(var a in q){if(q.hasOwnProperty(a)){v.executeOne(a)}}},executeOne:function(a){var b=s.getMedia(a);if(g.matchMedia(b).matches){for(var i=0,length=q[a].match.length;i<length;i++){q[a].match[i].call(z,a,b)}}else{for(var n=0,nlength=q[a].unmatch.length;n<nlength;n++){if(m==a){q[a].unmatch[n].call(z,a,b)}}}},executeThis:function(a,b,c){var d=s.getMedia(a);if(g.matchMedia(d).matches){if(c){b.call(z,a,d)}}else{if(!c){b.call(z,a,d)}}}};var w={appendDiv:function(){var a=j.createElement('div');a.id='rwd-test-viewport';a.style.cssText='position:fixed;height:100%;width:100%;top:-100%;left:-100%';j.body.appendChild(a);return a},updateSize:function(){var a=j.getElementById('rwd-test-viewport');if(!a){a=w.appendDiv()}r.size={};r.size.height=a.clientHeight;r.size.width=a.clientWidth;j.body.removeChild(a)},getWidth:function(){w.updateSize();return r.size.width},getHeight:function(){w.updateSize();return r.size.height}};var x={nativePicture:function(){if(!!(j.createElement('picture')&&j.createElement('source')&&g.HTMLPictureElement)){return true}return false},isPictureElement:function(o){return(typeof HTMLElement==='object'?o instanceof HTMLElement&&o.tagName==='PICTURE':o&&typeof o==='object'&&o.nodeType===1&&typeof o.nodeName==='string'&&o.tagName==='PICTURE')},isFunction:function(o){if(typeof(o)==="function"){return true}else{return false}}};var y={merge:function(a,b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}return a},trim:function(a){return a.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}};var z=(function(){var d={init:function(){s.get();s.setActive();t.bind()},push:function(a){s.push(a)},getBreakpoint:function(){return l},getBreakpoints:function(){return k},nativePicture:x.NativePicture,picture:function(a,b){var c;if(x.nativePicture()){return}if(!b)b={};for(var i=0,length=a.length;i<length;i++){if(x.isPictureElement(a[i])){c={'element':a[i],'callback':{'before':b.before,'after':b.after,'load':b.load,'loadonce':b.loadonce},'executed':false};p.push(c);u.process(p[p.length-1])}}},register:function(a,b){if(!q[a]){q[a]=[];q[a].match=[];q[a].unmatch=[]}if(b.match&&x.isFunction(b.match)){q[a].match.push(b.match);v.executeThis(a,b.match,true)}if(b.unmatch&&x.isFunction(b.unmatch)){q[a].unmatch.push(b.unmatch);v.executeThis(a,b.unmatch,false)}},getViewportWidth:function(){return w.getWidth()},getViewportHeight:function(){return w.getHeight()}};return d})();g.rwd=z})(window);rwd.init();