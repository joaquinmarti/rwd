/*! rwd - Author: Joaquin Marti - 2012  Dual MIT/BSD license */
/*! Javascript helper for responsive design */
(function(g,h){"use strict";var j=g.document;var k=[];var l;var m=[];var p=[];var q={};var r={get:function(){var a=j.getElementsByTagName('link');for(var i=0,length=a.length;i<length;i++){if(a[i].getAttribute('data-name')){k.push({'name':a[i].getAttribute('data-name'),'media':a[i].getAttribute('media')})}}},setActive:function(){for(var i=0,length=k.length;i<length;i++){if(g.matchMedia(k[i].media).matches){if(l!==k[i].name){l=k[i].name;s.breakpointChange()}}}},getMedia:function(a){for(var i=0,length=k.length;i<length;i++){if(a===k[i].name){return k[i].media}}}};var s={bind:function(){g.addEventListener('resize',function(){r.setActive();t.refresh()})},breakpointChange:function(){u.execute()}};var t={process:function(a){var b,src,pr,oSrc;b=t.getActiveSource(a.element);oSrc=t.getCurrentSrc(b);src=oSrc.src;pr=oSrc.pr;if(t.testUpdateSrc(a.element,src)){if(w.isFunction(a.callback.before)){a.callback.before.call()}t.render(a,src,pr);if(w.isFunction(a.callback.after)){a.callback.after.call()}}},render:function(b,c,d){var e=b.element;var f=e.getElementsByTagName('img')[0];if(!f){f=j.createElement('img');f.alt=e.getAttribute('alt');e.appendChild(f)}f.onload=function(){var a=new Image();a.src=c;f.width=a.width/d;f.height=a.height/d;if(!b.executed){if(w.isFunction(b.callback.loadonce)){b.callback.loadonce.call()}b.executed=true}if(w.isFunction(b.callback.load)){b.callback.load.call()}};f.src=c},refresh:function(){for(var i=0,length=m.length;i<length;i++){t.process(m[i])}},testUpdateSrc:function(a,b){var c=a.getElementsByTagName('img')[0];var d=(c)?c.getAttribute('src'):'';if(b!==d){return true}return false},getActiveSource:function(a){var b=t.getSources(a);var c;for(var i=0,length=b.length;i<length;i++){c=b[i].getAttribute('media')||r.getMedia(b[i].getAttribute('data-media'));if(c&&g.matchMedia&&g.matchMedia(c).matches){return b[i]}}},getSources:function(a){return a.getElementsByTagName('source')},getCurrentSrc:function(a){var b=a.getAttribute('srcset');if(b){var c=g.devicePixelRatio||1;var d=b.split(',');for(var i=d.length-1;i>=0;i--){var e=x.trim(d[i]).split(' ');var f=parseFloat(e[1],10);if(c>=f){return{src:e[0],pr:c}}}}else{return{src:a.getAttribute('src'),pr:1}}}};var u={execute:function(){for(var a in p){if(p.hasOwnProperty(a)){u.executeOne(a)}}},executeOne:function(a){var b=r.getMedia(a);if(g.matchMedia(b).matches){for(var i=0,length=p[a].match.length;i<length;i++){p[a].match[i].call(y,a,b)}}else{for(var n=0,nlength=p[a].unmatch.length;n<nlength;n++){p[a].unmatch[n].call(y,a,b)}}}};var v={appendDiv:function(){var a=j.createElement('div');a.id='rwd-test-viewport';a.style.cssText='position:fixed;height:100%;width:100%;top:-100%;left:-100%';j.body.appendChild(a);return a},updateSize:function(){var a=j.getElementById('rwd-test-viewport');if(!a){a=v.appendDiv()}q.size={};q.size.height=a.clientHeight;q.size.width=a.clientWidth;j.body.removeChild(a)},getWidth:function(){v.updateSize();return q.size.width},getHeight:function(){v.updateSize();return q.size.height}};var w={nativePicture:function(){if(!!(j.createElement('picture')&&j.createElement('source')&&g.HTMLPictureElement)){return true}return false},isPictureElement:function(o){return(typeof HTMLElement==='object'?o instanceof HTMLElement&&o.tagName==='PICTURE':o&&typeof o==='object'&&o.nodeType===1&&typeof o.nodeName==='string'&&o.tagName==='PICTURE')},isFunction:function(o){if(typeof(o)==="function"){return true}else{return false}}};var x={merge:function(a,b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}return a},trim:function(a){return a.replace(/^\s\s*/,'').replace(/\s\s*$/,'')}};var y=(function(){var d={init:function(){r.get();r.setActive();s.bind()},getBreakpoint:function(){return l},getBreakpoints:function(){return k},nativePicture:w.NativePicture,picture:function(a,b){var c;if(w.nativePicture()){return}for(var i=0,length=a.length;i<length;i++){if(w.isPictureElement(a[i])){c={'element':a[i],'callback':{'before':b.before,'after':b.after,'load':b.load,'loadonce':b.loadonce},'executed':false};m.push(c);t.process(m[m.length-1])}}},register:function(a,b){if(!p[a]){p[a]=[];p[a].match=[];p[a].unmatch=[]}if(b.match&&w.isFunction(b.match)){p[a].match.push(b.match)}if(b.unmatch&&w.isFunction(b.unmatch)){p[a].unmatch.push(b.unmatch)}u.executeOne(a)},getViewporWidth:function(){return v.getWidth()},getViewporHeight:function(){return v.getHeight()}};return d})();g.rwd=y})(window);rwd.init();